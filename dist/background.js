(()=>{"use strict";console.log("BG script is running!"),chrome.commands.onCommand.addListener((e=>{console.log(e),"reload-extension"===e&&(console.log("Reloading..."),chrome.runtime.reload())})),chrome.runtime.onInstalled.addListener((function(e){"install"===e.reason?chrome.tabs.create({url:"install.html"}):"update"===e.reason&&(chrome.action.setBadgeText({text:"!"}),chrome.action.setBadgeBackgroundColor({color:"#FF0000"}),chrome.storage.local.set({popupOpened:!1}))})),chrome.runtime.onMessage.addListener((function(e,o,n){"popupOpened"===e.type&&(chrome.action.setBadgeText({text:""}),chrome.storage.local.set({popupOpened:!0}))})),chrome.runtime.onMessage.addListener((function(e,o,n){"vken_access_token"===e.type&&chrome.storage.local.set({vkenAccessToken:e.value}),"vken_access_token_remove"===e.type&&chrome.storage.local.set({vkenAccessToken:""}),chrome.tabs.query({active:!0,currentWindow:!0},(function(o){if(o&&o.length>0){const n=o[0].id;void 0!==n&&(function(e,o){chrome.tabs.sendMessage(e,o)}(n,e),console.log(e))}}))}))})();